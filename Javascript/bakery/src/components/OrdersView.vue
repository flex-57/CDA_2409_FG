<template>
    <section>
        <div class="title-box">
            <h2>Commande</h2>
        </div>
        <table id="table-order">
            <thead>
                <tr>
                    <th @click="() => emit('sortOrders', 'id')">
                        ğŸ“²
                        <span v-if="sortState.col === 'id'">{{
                            sortState.direction ? 'ğŸ”½' : 'ğŸ”¼'
                        }}</span>
                    </th>
                    <th @click="() => emit('sortOrders', 'nbBaguettes')">
                        ğŸ¥–
                        <span v-if="sortState.col === 'nbBaguettes'">{{
                            sortState.direction ? 'ğŸ”½' : 'ğŸ”¼'
                        }}</span>
                    </th>
                    <th @click="() => emit('sortOrders', 'baguetteUnitPrice')">
                        ğŸ’°/ğŸ¥–
                        <span v-if="sortState.col === 'baguetteUnitPrice'">{{
                            sortState.direction ? 'ğŸ”½' : 'ğŸ”¼'
                        }}</span>
                    </th>
                    <th @click="() => emit('sortOrders', 'totalPrice')">
                        ğŸ’°ğŸ’°ğŸ’°
                        <span v-if="sortState.col === 'totalPrice'">{{
                            sortState.direction ? 'ğŸ”½' : 'ğŸ”¼'
                        }}</span>
                    </th>
                    <th @click="() => emit('sortOrders', 'time')">
                        âŒš
                        <span v-if="sortState.col === 'time'">{{
                            sortState.direction ? 'ğŸ”½' : 'ğŸ”¼'
                        }}</span>
                    </th>
                    <th>ğŸ—£</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="order in orders" :key="order.id">
                    <td>{{ order.id }}</td>
                    <td>{{ order.nbBaguettes }}</td>
                    <td>{{ order.baguetteUnitPrice }}</td>
                    <td>{{ order.totalPrice.toFixed(2) }}</td>
                    <td>{{ order.time }}</td>
                    <td>
                        <button @click="() => emit('validateOrder', order.id)">âœ…</button>
                        <button @click="() => emit('cancelOrder', order.id)">âŒ</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>
</template>

<script setup>
defineProps({
    orders: {
        type: Array,
        required: true,
    },
    sortState: {
        type: Object,
        required: true,
    },
})

const emit = defineEmits(['validateOrder', 'cancelOrder', 'sortOrders'])
</script>
